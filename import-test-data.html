<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ¯å…¥æ¸¬è©¦æ•¸æ“š - å»£æ¸…å®®è¨˜å¸³è»Ÿé«”</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .btn {
            background: #4CAF50;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .btn-primary {
            background: #2196F3;
        }
        .btn-primary:hover {
            background: #1976D2;
        }
        .btn-danger {
            background: #f44336;
        }
        .btn-danger:hover {
            background: #da190b;
        }
        .result {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-align: left;
            border-left: 4px solid #4CAF50;
        }
        h1 {
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 2.5em;
        }
        .file-input {
            margin: 20px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }
        .file-input input[type="file"] {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 4px;
            background: white;
            color: #333;
        }
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
        }
        .instructions h3 {
            color: #ffeb3b;
            margin-top: 0;
        }
        .instructions ol {
            padding-left: 20px;
        }
        .instructions li {
            margin: 10px 0;
            line-height: 1.6;
        }
        .data-preview {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›ï¸ å»£æ¸…å®®è¨˜å¸³è»Ÿé«”</h1>
        <h2>ğŸ“¥ æ¸¬è©¦æ•¸æ“šåŒ¯å…¥å·¥å…·</h2>
        
        <div class="instructions">
            <h3>ğŸ“‹ ä½¿ç”¨èªªæ˜ï¼š</h3>
            <ol>
                <li><strong>æ–¹æ³•ä¸€ï¼š</strong>é»æ“Šã€Œå¿«é€Ÿç”Ÿæˆæ¸¬è©¦æ•¸æ“šã€æŒ‰éˆ•ï¼Œè‡ªå‹•ç”Ÿæˆè±å¯Œçš„æ¸¬è©¦æ•¸æ“š</li>
                <li><strong>æ–¹æ³•äºŒï¼š</strong>ä¸‹è¼‰æ¸¬è©¦æ•¸æ“šæª”æ¡ˆï¼Œç„¶å¾Œä½¿ç”¨ã€Œé¸æ“‡æª”æ¡ˆã€åŒ¯å…¥</li>
                <li>åŒ¯å…¥å®Œæˆå¾Œï¼Œé»æ“Šã€Œå‰å¾€ä¸»ç¨‹å¼ã€é–‹å§‹æ¸¬è©¦åˆ—å°åŠŸèƒ½</li>
                <li>æ¸¬è©¦æ™‚è«‹ç‰¹åˆ¥æ³¨æ„ã€Œææ¬¾æ”¶æ“šã€å’Œã€Œè²¡å‹™å ±è¡¨ã€çš„é¸æ“‡åŠŸèƒ½</li>
            </ol>
        </div>

        <div style="margin: 30px 0;">
            <button class="btn btn-primary" onclick="generateQuickData()">
                ğŸ² å¿«é€Ÿç”Ÿæˆæ¸¬è©¦æ•¸æ“š
            </button>
            
            <a href="temple-test-data.json" download class="btn">
                ğŸ“¥ ä¸‹è¼‰æ¸¬è©¦æ•¸æ“šæª”æ¡ˆ
            </a>
        </div>

        <div class="file-input">
            <label for="fileInput"><strong>ğŸ“ æˆ–é¸æ“‡å‚™ä»½æª”æ¡ˆåŒ¯å…¥ï¼š</strong></label>
            <input type="file" id="fileInput" accept=".json" onchange="importData(event)">
        </div>

        <div style="margin: 30px 0;">
            <button class="btn btn-danger" onclick="clearAllData()">
                ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰æ•¸æ“š
            </button>
            
            <a href="index-enhanced.html" class="btn">
                ğŸ  å‰å¾€ä¸»ç¨‹å¼
            </a>
        </div>

        <div id="result" style="display: none;"></div>
    </div>

    <script>
        function generateQuickData() {
            console.log('ğŸ›ï¸ é–‹å§‹ç”Ÿæˆå»£æ¸…å®®æ¸¬è©¦æ•¸æ“š...');
            
            // æ¸…ç©ºç¾æœ‰æ•¸æ“š
            localStorage.removeItem('temple-records');
            localStorage.removeItem('temple-believers');
            localStorage.removeItem('temple-reminders');
            
            // ç”Ÿæˆæ¸¬è©¦æ•¸æ“š
            const records = [];
            const believers = [];
            const reminders = [];
            
            // æ”¶å…¥é¡åˆ¥
            const incomeCategories = ['é¦™æ²¹éŒ¢', 'é»ç‡ˆè²»', 'å®‰å¤ªæ­²', 'ç¥ˆç¦é‡‘', 'æ³•æœƒåŠŸå¾·é‡‘', 'å»ºå»ŸåŸºé‡‘', 'æ…ˆå–„ææ¬¾', 'ç¯€æ…¶ææ¬¾', 'ç‰¹æ®Šæ³•æœƒ', 'å…¶ä»–ææ¬¾'];
            
            // æ”¯å‡ºé¡åˆ¥  
            const expenseCategories = ['æ°´é›»è²»', 'æ¸…æ½”ç”¨å“', 'ç¥­å“æ¡è³¼', 'ç¶­ä¿®è²»ç”¨', 'äººäº‹è²»ç”¨', 'æ³•æœƒç”¨å“', 'æ…ˆå–„æ”¯å‡º', 'è¨­å‚™æ¡è³¼', 'è¡Œæ”¿è²»ç”¨', 'å…¶ä»–æ”¯å‡º'];
            
            // ä¿¡çœ¾å§“å
            const believerNames = ['ç‹å¤§æ˜', 'æå°è¯', 'é™³ç¾ç²', 'å¼µå¿—å¼·', 'æ—æ·‘èŠ¬', 'é»ƒå»ºåœ‹', 'å³é›…å©·', 'åŠ‰ä¿Šå‚‘', 'è”¡ä½³è“‰', 'é„­æ–‡é¾', 'è¬æ·‘æƒ ', 'è¨±å¿—è±ª', 'æ¥Šéº—å¨Ÿ', 'æ´ªæ˜å¾·', 'å‘¨é›…é›¯', 'æœ±å»ºè¯', 'ä½•ç¾ç ', 'å‘‚å¿—æ˜', 'è˜‡é›…çª', 'é¦¬æ–‡å‚‘'];
            
            let recordId = 1;
            
            // ç”Ÿæˆ2023å¹´å’Œ2024å¹´çš„è²¡å‹™è¨˜éŒ„
            for (let year = 2023; year <= 2024; year++) {
                for (let month = 1; month <= 12; month++) {
                    if (year === 2024 && month > new Date().getMonth() + 1) break;
                    
                    const recordCount = Math.floor(Math.random() * 8) + 12; // 12-20ç­†
                    
                    for (let i = 0; i < recordCount; i++) {
                        const isIncome = Math.random() > 0.3;
                        const day = Math.floor(Math.random() * 28) + 1;
                        const date = `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                        
                        if (isIncome) {
                            const category = incomeCategories[Math.floor(Math.random() * incomeCategories.length)];
                            const donor = believerNames[Math.floor(Math.random() * believerNames.length)];
                            let amount;
                            
                            switch (category) {
                                case 'é¦™æ²¹éŒ¢': amount = Math.floor(Math.random() * 500) + 100; break;
                                case 'é»ç‡ˆè²»': amount = Math.floor(Math.random() * 300) + 200; break;
                                case 'å®‰å¤ªæ­²': amount = Math.floor(Math.random() * 400) + 600; break;
                                case 'å»ºå»ŸåŸºé‡‘': amount = Math.floor(Math.random() * 5000) + 1000; break;
                                case 'æ³•æœƒåŠŸå¾·é‡‘': amount = Math.floor(Math.random() * 2000) + 500; break;
                                default: amount = Math.floor(Math.random() * 1000) + 300;
                            }
                            
                            records.push({
                                id: recordId++,
                                type: 'income',
                                category: category,
                                amount: amount,
                                date: date,
                                description: `${category} - ${donor}`,
                                donor: donor,
                                createdAt: new Date(date).toISOString()
                            });
                        } else {
                            const category = expenseCategories[Math.floor(Math.random() * expenseCategories.length)];
                            let amount;
                            
                            switch (category) {
                                case 'æ°´é›»è²»': amount = Math.floor(Math.random() * 3000) + 2000; break;
                                case 'ç¥­å“æ¡è³¼': amount = Math.floor(Math.random() * 2000) + 1000; break;
                                case 'ç¶­ä¿®è²»ç”¨': amount = Math.floor(Math.random() * 5000) + 1000; break;
                                case 'äººäº‹è²»ç”¨': amount = Math.floor(Math.random() * 8000) + 5000; break;
                                case 'è¨­å‚™æ¡è³¼': amount = Math.floor(Math.random() * 10000) + 2000; break;
                                default: amount = Math.floor(Math.random() * 1500) + 500;
                            }
                            
                            records.push({
                                id: recordId++,
                                type: 'expense',
                                category: category,
                                amount: amount,
                                date: date,
                                description: `${category} - ${month}æœˆä»½`,
                                donor: '',
                                createdAt: new Date(date).toISOString()
                            });
                        }
                    }
                }
            }
            
            // ç”Ÿæˆä¿¡çœ¾è³‡æ–™
            believerNames.forEach((name, index) => {
                const birthYear = 1950 + Math.floor(Math.random() * 50);
                const birthMonth = Math.floor(Math.random() * 12) + 1;
                const birthDay = Math.floor(Math.random() * 28) + 1;
                const birthday = `${birthYear}-${birthMonth.toString().padStart(2, '0')}-${birthDay.toString().padStart(2, '0')}`;
                
                const believerRecords = records.filter(r => r.donor === name && r.type === 'income');
                const totalDonation = believerRecords.reduce((sum, r) => sum + r.amount, 0);
                
                believers.push({
                    name: name,
                    birthday: birthday,
                    phone: `09${Math.floor(Math.random() * 100000000).toString().padStart(8, '0')}`,
                    email: `${name.replace(/[^\w]/g, '')}@email.com`,
                    address: `å°åŒ—å¸‚${['ä¸­æ­£å€', 'å¤§åŒå€', 'ä¸­å±±å€', 'æ¾å±±å€', 'å¤§å®‰å€'][Math.floor(Math.random() * 5)]}æŸæŸè·¯${Math.floor(Math.random() * 200) + 1}è™Ÿ`,
                    totalDonation: totalDonation,
                    donationCount: believerRecords.length,
                    createdAt: new Date().toISOString()
                });
            });
            
            // ç”Ÿæˆæé†’äº‹é …
            const reminderTitles = ['æº–å‚™æ˜¥ç¯€æ³•æœƒç”¨å“', 'æª¢æŸ¥æ¶ˆé˜²è¨­å‚™', 'æ›´æ–°ä¿¡çœ¾è³‡æ–™', 'æº–å‚™ä¸­å…ƒæ™®æ¸¡', 'å®‰æ’å¹´åº¦å¤§æƒé™¤', 'æª¢æŸ¥é›»å™¨è¨­å‚™', 'æº–å‚™åª½ç¥–è–èª•æ³•æœƒ', 'æ›´æ–°è²¡å‹™å ±è¡¨', 'å®‰æ’å¿—å·¥åŸ¹è¨“', 'æª¢æŸ¥å»ºç¯‰å®‰å…¨'];
            
            reminderTitles.forEach((title, index) => {
                const dueDate = new Date();
                dueDate.setDate(dueDate.getDate() + Math.floor(Math.random() * 90) + 1);
                
                reminders.push({
                    id: index + 1,
                    title: title,
                    description: `${title}çš„è©³ç´°èªªæ˜å’Œæ³¨æ„äº‹é …`,
                    dueDate: dueDate.toISOString().split('T')[0],
                    repeat: ['none', 'daily', 'weekly', 'monthly', 'yearly'][Math.floor(Math.random() * 5)],
                    advanceDays: Math.floor(Math.random() * 7) + 1,
                    completed: Math.random() > 0.7,
                    createdAt: new Date().toISOString()
                });
            });
            
            // ä¿å­˜åˆ° localStorage
            localStorage.setItem('temple-records', JSON.stringify(records));
            localStorage.setItem('temple-believers', JSON.stringify(believers));
            localStorage.setItem('temple-reminders', JSON.stringify(reminders));
            
            const totalIncome = records.filter(r => r.type === 'income').reduce((sum, r) => sum + r.amount, 0);
            const totalExpense = records.filter(r => r.type === 'expense').reduce((sum, r) => sum + r.amount, 0);
            
            showResult(`
                <h3>âœ… æ¸¬è©¦æ•¸æ“šç”Ÿæˆå®Œæˆï¼</h3>
                <div class="data-preview">
                ğŸ“Š è²¡å‹™è¨˜éŒ„: <strong>${records.length}</strong> ç­†<br>
                ğŸ‘¥ ä¿¡çœ¾è³‡æ–™: <strong>${believers.length}</strong> ç­†<br>
                â° æé†’äº‹é …: <strong>${reminders.length}</strong> ç­†<br>
                ğŸ’° ç¸½æ”¶å…¥: <strong>${totalIncome.toLocaleString()}</strong> å…ƒ<br>
                ğŸ’¸ ç¸½æ”¯å‡º: <strong>${totalExpense.toLocaleString()}</strong> å…ƒ<br>
                ğŸ’µ çµé¤˜: <strong>${(totalIncome - totalExpense).toLocaleString()}</strong> å…ƒ
                </div>
                <p style="color: #4CAF50; font-weight: bold;">
                    ğŸ¯ æ•¸æ“šå·²æˆåŠŸè¼‰å…¥ï¼ç¾åœ¨å¯ä»¥å‰å¾€ä¸»ç¨‹å¼æ¸¬è©¦åˆ—å°åŠŸèƒ½äº†ã€‚
                </p>
            `);
        }
        
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    if (!backupData.data) {
                        throw new Error('ç„¡æ•ˆçš„å‚™ä»½æª”æ¡ˆæ ¼å¼');
                    }
                    
                    // æ¢å¾©è³‡æ–™
                    if (backupData.data.records) {
                        localStorage.setItem('temple-records', JSON.stringify(backupData.data.records));
                    }
                    if (backupData.data.believers) {
                        localStorage.setItem('temple-believers', JSON.stringify(backupData.data.believers));
                    }
                    if (backupData.data.reminders) {
                        localStorage.setItem('temple-reminders', JSON.stringify(backupData.data.reminders));
                    }
                    
                    const recordsCount = backupData.data.records ? backupData.data.records.length : 0;
                    const believersCount = backupData.data.believers ? backupData.data.believers.length : 0;
                    const remindersCount = backupData.data.reminders ? backupData.data.reminders.length : 0;
                    
                    showResult(`
                        <h3>âœ… æ•¸æ“šåŒ¯å…¥æˆåŠŸï¼</h3>
                        <div class="data-preview">
                        ğŸ“Š è²¡å‹™è¨˜éŒ„: <strong>${recordsCount}</strong> ç­†<br>
                        ğŸ‘¥ ä¿¡çœ¾è³‡æ–™: <strong>${believersCount}</strong> ç­†<br>
                        â° æé†’äº‹é …: <strong>${remindersCount}</strong> ç­†
                        </div>
                        <p style="color: #4CAF50; font-weight: bold;">
                            ğŸ¯ æ•¸æ“šå·²æˆåŠŸè¼‰å…¥ï¼ç¾åœ¨å¯ä»¥å‰å¾€ä¸»ç¨‹å¼æ¸¬è©¦åˆ—å°åŠŸèƒ½äº†ã€‚
                        </p>
                    `);
                    
                    event.target.value = '';
                    
                } catch (error) {
                    showResult(`
                        <h3>âŒ åŒ¯å…¥å¤±æ•—</h3>
                        <p style="color: #f44336;">éŒ¯èª¤ï¼š${error.message}</p>
                        <p>è«‹ç¢ºèªæª”æ¡ˆæ ¼å¼æ­£ç¢ºã€‚</p>
                    `);
                }
            };
            
            reader.readAsText(file);
        }
        
        function clearAllData() {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰æ•¸æ“šå—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')) {
                localStorage.removeItem('temple-records');
                localStorage.removeItem('temple-believers');
                localStorage.removeItem('temple-reminders');
                localStorage.removeItem('temple-inventory');
                localStorage.removeItem('temple-stock-movements');
                localStorage.removeItem('temple-events');
                
                showResult(`
                    <h3>ğŸ—‘ï¸ æ‰€æœ‰æ•¸æ“šå·²æ¸…ç©º</h3>
                    <p>æœ¬åœ°å­˜å„²ä¸­çš„æ‰€æœ‰æ•¸æ“šå·²è¢«æ¸…é™¤ã€‚</p>
                `);
            }
        }
        
        function showResult(html) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = html;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>
