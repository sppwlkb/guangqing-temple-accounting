<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»£æ¸…å®®æ™ºèƒ½è¨˜å¸³ç³»çµ± - çµ‚æ¥µç‰ˆ</title>
    
    <!-- PWAæ”¯æ´ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Element Plus CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus@2.3.8/dist/index.css">
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3.3.4/dist/vue.global.js"></script>
    
    <!-- Element Plus -->
    <script src="https://unpkg.com/element-plus@2.3.8/dist/index.full.js"></script>
    
    <!-- Element Plus Icons -->
    <script src="https://unpkg.com/@element-plus/icons-vue@2.1.0/dist/index.iife.min.js"></script>
    
    <!-- ECharts -->
    <script src="https://unpkg.com/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <!-- Day.js -->
    <script src="https://unpkg.com/dayjs@1.11.9/dayjs.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f7fa;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0 20px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .app-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .income { color: #1cc88a; }
        .expense { color: #e74a3b; }
        .balance { color: #36b9cc; }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .content-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .record-item:last-child {
            border-bottom: none;
        }
        
        .record-info {
            flex: 1;
        }
        
        .record-category {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .record-date {
            font-size: 12px;
            color: #666;
        }
        
        .record-amount {
            font-weight: bold;
            font-size: 16px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #1cc88a;
            color: white;
        }
        
        .btn-success:hover {
            background: #17a673;
        }
        
        .btn-danger {
            background: #e74a3b;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d68910;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .reminder-item.urgent {
            border-left-color: #e74a3b;
            background: #fff5f5;
        }
        
        .reminder-content {
            flex: 1;
        }
        
        .reminder-title {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .reminder-date {
            font-size: 12px;
            color: #666;
        }
        
        .reminder-actions {
            display: flex;
            gap: 5px;
        }
        
        .believer-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        
        .believer-card.taisui-warning {
            border-left-color: #e74a3b;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
        }
        
        .believer-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .believer-info {
            color: #666;
            margin-bottom: 4px;
            font-size: 13px;
        }
        
        .taisui-alert {
            background: #f8d7da;
            color: #721c24;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
            font-size: 12px;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .app-title {
                font-size: 16px;
            }
            
            .header-actions {
                gap: 5px;
            }
        }
        
        /* Element Plus è‡ªå®šç¾©æ¨£å¼ */
        .el-tabs__item {
            font-size: 16px;
            font-weight: 500;
        }
        
        .el-tabs__item.is-active {
            color: #667eea;
        }
        
        .el-tabs__active-bar {
            background-color: #667eea;
        }
        
        .el-button--primary {
            background-color: #667eea;
            border-color: #667eea;
        }
        
        .el-button--primary:hover {
            background-color: #5a6fd8;
            border-color: #5a6fd8;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="app-container">
            <!-- é ‚éƒ¨æ¨™é¡Œ -->
            <div class="app-header">
                <div class="app-title">ğŸ›ï¸ å»£æ¸…å®®æ™ºèƒ½è¨˜å¸³ç³»çµ±</div>
                <div class="header-actions">
                    <el-button type="primary" @click="showAddModal = true" size="small">
                        å¿«é€Ÿè¨˜å¸³
                    </el-button>
                    <div style="position: relative;">
                        <el-button type="info" @click="showNotifications" size="small" circle>
                            <el-icon><Bell /></el-icon>
                        </el-button>
                        <div v-if="urgentReminders.length > 0" class="notification-badge">
                            {{ urgentReminders.length }}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ä¸»è¦å…§å®¹ -->
            <div class="main-content">
                <div class="page-content">
                    <!-- çµ±è¨ˆå¡ç‰‡ -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value income">{{ formatCurrency(totalIncome) }}</div>
                            <div class="stat-label">ç¸½æ”¶å…¥</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value expense">{{ formatCurrency(totalExpense) }}</div>
                            <div class="stat-label">ç¸½æ”¯å‡º</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value balance">{{ formatCurrency(totalBalance) }}</div>
                            <div class="stat-label">çµé¤˜</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" style="color: #667eea;">{{ believers.length }}</div>
                            <div class="stat-label">ä¿¡çœ¾äººæ•¸</div>
                        </div>
                    </div>
                    
                    <!-- æ¨™ç±¤é å…§å®¹ -->
                    <el-tabs v-model="currentPage" @tab-click="handleTabClick">
                        <!-- è¨˜å¸³ç®¡ç† -->
                        <el-tab-pane label="ğŸ“ è¨˜å¸³ç®¡ç†" name="records">
                            <div class="content-grid">
                                <div class="content-card">
                                    <div class="card-title">æœ€è¿‘è¨˜éŒ„</div>
                                    <div v-if="recentRecords.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                        æš«ç„¡è¨˜éŒ„ï¼Œé»æ“Šå³ä¸Šè§’ã€Œå¿«é€Ÿè¨˜å¸³ã€é–‹å§‹è¨˜éŒ„
                                    </div>
                                    <div v-for="record in recentRecords" :key="record.id" class="record-item">
                                        <div class="record-info">
                                            <div class="record-category">{{ record.category }}</div>
                                            <div class="record-date">{{ formatDate(record.date) }}</div>
                                            <div v-if="record.donor" style="font-size: 11px; color: #999;">ğŸ‘¤ {{ record.donor }}</div>
                                        </div>
                                        <div class="record-amount" :class="record.type">
                                            {{ record.type === 'income' ? '+' : '-' }}{{ formatCurrency(record.amount) }}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="content-card">
                                    <div class="card-title">æ”¶æ”¯è¶¨å‹¢</div>
                                    <div id="trend-chart" class="chart-container"></div>
                                </div>
                            </div>
                        </el-tab-pane>

                        <!-- ä¿¡çœ¾ç®¡ç† -->
                        <el-tab-pane label="ğŸ‘¥ ä¿¡çœ¾ç®¡ç†" name="believers">
                            <div style="margin-bottom: 20px;">
                                <el-button type="success" @click="showBelieverModal = true">
                                    <el-icon><Plus /></el-icon>
                                    æ–°å¢ä¿¡çœ¾
                                </el-button>
                                <el-button type="warning" @click="checkTaiSuiForAll">
                                    <el-icon><Warning /></el-icon>
                                    æª¢æŸ¥çŠ¯å¤ªæ­²
                                </el-button>
                            </div>

                            <div v-if="believers.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                æš«ç„¡ä¿¡çœ¾è³‡æ–™ï¼Œè«‹æ–°å¢ç¬¬ä¸€ä½ä¿¡çœ¾
                            </div>

                            <el-row :gutter="20">
                                <el-col :span="8" v-for="believer in believers" :key="believer.name">
                                    <div class="believer-card" :class="{ 'taisui-warning': isTaiSuiBeliever(believer) }">
                                        <div class="believer-name">{{ believer.name }}</div>
                                        <div class="believer-info">ğŸ“ {{ believer.phone || 'æœªæä¾›' }}</div>
                                        <div class="believer-info">ğŸ“§ {{ believer.email || 'æœªæä¾›' }}</div>
                                        <div class="believer-info">ğŸ‚ {{ believer.birthday || 'æœªæä¾›' }}</div>
                                        <div v-if="getBelieverZodiac(believer)" class="believer-info" style="font-weight: bold; color: #667eea;">
                                            ğŸ² ç”Ÿè‚–ï¼š{{ getBelieverZodiac(believer) }}
                                        </div>
                                        <div class="believer-info">ğŸ  {{ believer.address || 'æœªæä¾›' }}</div>
                                        <div class="believer-info">ğŸ’° ç´¯è¨ˆææ¬¾ï¼š${{ (believer.totalDonation || 0).toLocaleString() }}</div>
                                        <div class="believer-info">ğŸ“Š ææ¬¾æ¬¡æ•¸ï¼š{{ believer.donationCount || 0 }}æ¬¡</div>

                                        <div v-if="isTaiSuiBeliever(believer)" class="taisui-alert">
                                            âš ï¸ {{ new Date().getFullYear() }}å¹´çŠ¯å¤ªæ­²ï¼Œå»ºè­°é»å¤ªæ­²ç‡ˆç¥ˆç¦
                                            <el-button size="small" type="warning" @click="notifyBeliever(believer.name)" style="margin-left: 8px;">
                                                ç™¼é€æé†’
                                            </el-button>
                                        </div>

                                        <div style="margin-top: 12px;">
                                            <el-button size="small" @click="editBeliever(believer)">ç·¨è¼¯</el-button>
                                            <el-button size="small" type="danger" @click="deleteBeliever(believer.name)">åˆªé™¤</el-button>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>

                        <!-- åˆ†æå ±è¡¨ -->
                        <el-tab-pane label="ğŸ“Š åˆ†æå ±è¡¨" name="analysis">
                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <div class="content-card">
                                        <div class="card-title">æ”¶å…¥çµæ§‹åˆ†æ</div>
                                        <div id="income-chart" class="chart-container"></div>
                                    </div>
                                </el-col>
                                <el-col :span="12">
                                    <div class="content-card">
                                        <div class="card-title">æ”¯å‡ºçµæ§‹åˆ†æ</div>
                                        <div id="expense-chart" class="chart-container"></div>
                                    </div>
                                </el-col>
                            </el-row>

                            <div class="content-card" style="margin-top: 20px;">
                                <div class="card-title">æœˆåº¦æ”¶æ”¯å°æ¯”</div>
                                <div id="monthly-chart" class="chart-container"></div>
                            </div>
                        </el-tab-pane>

                        <!-- å¤ªæ­²æé†’ -->
                        <el-tab-pane label="ğŸ® å¤ªæ­²æé†’" name="taisui">
                            <div style="margin-bottom: 20px;">
                                <el-select v-model="selectedYear" @change="updateTaiSuiInfo" style="margin-right: 10px;">
                                    <el-option label="2024å¹´ (ç”²è¾°é¾å¹´)" value="2024"></el-option>
                                    <el-option label="2025å¹´ (ä¹™å·³è›‡å¹´)" value="2025"></el-option>
                                    <el-option label="2026å¹´ (ä¸™åˆé¦¬å¹´)" value="2026"></el-option>
                                </el-select>
                                <el-button type="primary" @click="sendTaiSuiReminders">
                                    <el-icon><Message /></el-icon>
                                    æ‰¹é‡ç™¼é€æé†’
                                </el-button>
                            </div>

                            <el-alert
                                :title="`${selectedYear}å¹´${getYearZodiacName(selectedYear)}å¹´çŠ¯å¤ªæ­²ç”Ÿè‚–`"
                                type="warning"
                                :closable="false"
                                style="margin-bottom: 20px;">
                                <div v-for="conflict in getTaiSuiConflicts(parseInt(selectedYear))" :key="conflict.type" style="margin-bottom: 8px;">
                                    <strong>{{ conflict.type }}ï¼š</strong>
                                    <el-tag v-for="zodiac in conflict.signs" :key="zodiac" type="danger" style="margin-right: 5px;">
                                        {{ getZodiacEmoji(zodiac) }} {{ zodiac }}
                                    </el-tag>
                                </div>
                            </el-alert>

                            <div class="content-card">
                                <div class="card-title">éœ€è¦é»å¤ªæ­²ç‡ˆçš„ä¿¡çœ¾ ({{ taisuiBelievers.length }}ä½)</div>
                                <div v-if="taisuiBelievers.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                    ç›®å‰æ²’æœ‰ä¿¡çœ¾éœ€è¦é»å¤ªæ­²ç‡ˆ
                                </div>
                                <el-row :gutter="20">
                                    <el-col :span="8" v-for="believer in taisuiBelievers" :key="believer.name">
                                        <div class="believer-card taisui-warning">
                                            <div class="believer-name">{{ believer.name }}</div>
                                            <div class="believer-info">
                                                ç”Ÿè‚–ï¼š{{ getBelieverZodiac(believer) }}
                                                ({{ getTaiSuiType(believer) }})
                                            </div>
                                            <div class="believer-info">ğŸ“ {{ believer.phone || 'æœªæä¾›' }}</div>
                                            <div class="believer-info">ğŸ“§ {{ believer.email || 'æœªæä¾›' }}</div>
                                            <el-button size="small" type="warning" @click="notifyBeliever(believer.name)">
                                                ç™¼é€æé†’
                                            </el-button>
                                        </div>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-tab-pane>

                        <!-- æ™ºèƒ½æé†’ -->
                        <el-tab-pane label="ğŸ”” æ™ºèƒ½æé†’" name="reminders">
                            <div style="margin-bottom: 20px;">
                                <el-button type="primary" @click="showReminderModal = true">
                                    <el-icon><Plus /></el-icon>
                                    æ–°å¢æé†’
                                </el-button>
                            </div>

                            <div v-if="allReminders.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                æš«ç„¡æé†’äº‹é …ï¼Œé»æ“Šã€Œæ–°å¢æé†’ã€é–‹å§‹è¨­å®š
                            </div>

                            <div v-for="reminder in allReminders" :key="reminder.id" class="reminder-item" :class="{ urgent: isUrgent(reminder) }">
                                <div class="reminder-content">
                                    <div class="reminder-title">{{ reminder.title }}</div>
                                    <div class="reminder-date">{{ formatReminderDate(reminder) }}</div>
                                </div>
                                <div class="reminder-actions">
                                    <el-button size="small" @click="editReminder(reminder)">ç·¨è¼¯</el-button>
                                    <el-button size="small" type="success" @click="markReminderDone(reminder.id)">å®Œæˆ</el-button>
                                    <el-button size="small" type="warning" @click="snoozeReminder(reminder.id)">å»¶å¾Œ</el-button>
                                    <el-button size="small" type="danger" @click="deleteReminder(reminder.id)">åˆªé™¤</el-button>
                                </div>
                            </div>
                        </el-tab-pane>
                    </el-tabs>
                </div>
            </div>
        </div>

        <!-- è¨˜å¸³æ¨¡æ…‹æ¡† -->
        <el-dialog v-model="showAddModal" :title="modalTitle" width="500px">
            <el-form :model="form" label-width="80px">
                <el-form-item label="é¡å‹">
                    <el-select v-model="form.type" @change="updateCategories" placeholder="è«‹é¸æ“‡é¡å‹">
                        <el-option label="æ”¶å…¥" value="income"></el-option>
                        <el-option label="æ”¯å‡º" value="expense"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="é‡‘é¡">
                    <el-input-number v-model="form.amount" :min="0" :precision="0" style="width: 100%"></el-input-number>
                </el-form-item>
                <el-form-item label="åˆ†é¡">
                    <el-select v-model="form.category" placeholder="è«‹é¸æ“‡åˆ†é¡">
                        <el-option v-for="cat in currentCategories" :key="cat" :label="cat" :value="cat"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="ä¿¡çœ¾å§“å">
                    <el-select v-model="form.donor" filterable allow-create placeholder="è«‹é¸æ“‡æˆ–è¼¸å…¥ä¿¡çœ¾å§“å">
                        <el-option v-for="believer in believers" :key="believer.name" :label="believer.name" :value="believer.name"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="èªªæ˜">
                    <el-input v-model="form.description" type="textarea" rows="3"></el-input>
                </el-form-item>
                <el-form-item label="æ—¥æœŸ">
                    <el-date-picker v-model="form.date" type="date" style="width: 100%"></el-date-picker>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeAddModal">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="saveRecord">å„²å­˜</el-button>
            </template>
        </el-dialog>

        <!-- ä¿¡çœ¾è³‡æ–™æ¨¡æ…‹æ¡† -->
        <el-dialog v-model="showBelieverModal" title="ä¿¡çœ¾è³‡æ–™" width="500px">
            <el-form :model="believerForm" label-width="80px">
                <el-form-item label="å§“å" required>
                    <el-input v-model="believerForm.name"></el-input>
                </el-form-item>
                <el-form-item label="ç”Ÿæ—¥">
                    <el-date-picker v-model="believerForm.birthday" type="date" style="width: 100%" @change="updateBelieverZodiac"></el-date-picker>
                    <div v-if="believerZodiacDisplay" style="margin-top: 5px; color: #667eea; font-weight: bold;">
                        {{ believerZodiacDisplay }}
                    </div>
                </el-form-item>
                <el-form-item label="é›»è©±">
                    <el-input v-model="believerForm.phone"></el-input>
                </el-form-item>
                <el-form-item label="Email">
                    <el-input v-model="believerForm.email" type="email"></el-input>
                </el-form-item>
                <el-form-item label="åœ°å€">
                    <el-input v-model="believerForm.address" type="textarea" rows="2"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeBelieverModal">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="saveBeliever">å„²å­˜</el-button>
            </template>
        </el-dialog>

        <!-- æé†’æ¨¡æ…‹æ¡† -->
        <el-dialog v-model="showReminderModal" :title="reminderModalTitle" width="500px">
            <el-form :model="reminderForm" label-width="80px">
                <el-form-item label="æ¨™é¡Œ" required>
                    <el-input v-model="reminderForm.title"></el-input>
                </el-form-item>
                <el-form-item label="èªªæ˜">
                    <el-input v-model="reminderForm.description" type="textarea" rows="3"></el-input>
                </el-form-item>
                <el-form-item label="åˆ°æœŸæ—¥">
                    <el-date-picker v-model="reminderForm.dueDate" type="date" style="width: 100%"></el-date-picker>
                </el-form-item>
                <el-form-item label="é‡è¤‡">
                    <el-select v-model="reminderForm.repeat">
                        <el-option label="ä¸é‡è¤‡" value="none"></el-option>
                        <el-option label="æ¯æ—¥" value="daily"></el-option>
                        <el-option label="æ¯é€±" value="weekly"></el-option>
                        <el-option label="æ¯æœˆ" value="monthly"></el-option>
                        <el-option label="æ¯å¹´" value="yearly"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="æå‰å¤©æ•¸">
                    <el-input-number v-model="reminderForm.advanceDays" :min="0" :max="30"></el-input-number>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeReminderModal">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="saveReminder">å„²å­˜</el-button>
            </template>
        </el-dialog>

        <!-- é€šçŸ¥å½ˆçª— -->
        <el-dialog v-model="showNotificationPopup" title="ğŸ“¢ é‡è¦æé†’" width="400px">
            <div v-if="currentNotification">
                <h3>{{ currentNotification.title }}</h3>
                <p>{{ currentNotification.description }}</p>
                <p><strong>åˆ°æœŸæ—¥ï¼š</strong>{{ formatDate(currentNotification.dueDate) }}</p>
            </div>
            <template #footer>
                <el-button @click="showNotificationPopup = false">çŸ¥é“äº†</el-button>
            </template>
        </el-dialog>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;

        createApp({
            setup() {
                // éŸ¿æ‡‰å¼æ•¸æ“š
                const currentPage = ref('records');
                const showAddModal = ref(false);
                const showBelieverModal = ref(false);
                const showReminderModal = ref(false);
                const showNotificationPopup = ref(false);
                const selectedYear = ref(new Date().getFullYear().toString());

                // è¡¨å–®æ•¸æ“š
                const form = ref({
                    type: '',
                    amount: 0,
                    category: '',
                    donor: '',
                    description: '',
                    date: new Date()
                });

                const believerForm = ref({
                    name: '',
                    birthday: null,
                    phone: '',
                    email: '',
                    address: ''
                });

                const reminderForm = ref({
                    title: '',
                    description: '',
                    dueDate: new Date(),
                    repeat: 'none',
                    advanceDays: 1
                });

                // æ•¸æ“šå­˜å„²
                const records = ref([]);
                const believers = ref([]);
                const reminders = ref([]);
                const editingReminder = ref(null);
                const editingBeliever = ref(null);
                const currentNotification = ref(null);
                const believerZodiacDisplay = ref('');

                // åˆ†é¡è¨­å®š
                const categories = {
                    income: ['é¦™æ²¹éŒ¢', 'é»ç‡ˆè²»', 'å®‰å¤ªæ­²', 'å…‰æ˜ç‡ˆ', 'å¹³å®‰ç‡ˆ', 'ææ¬¾', 'æ³•æœƒæ”¶å…¥', 'ç±¤è©©æ”¶å…¥', 'å…¶ä»–æ”¶å…¥'],
                    expense: ['ä¾›å“è²»ç”¨', 'é¦™ç‡­è²»ç”¨', 'æ°´é›»è²»', 'ç¶­ä¿®è²»', 'æ¸…æ½”è²»', 'æ³•æœƒæ”¯å‡º', 'äººäº‹è²»ç”¨', 'è¡Œæ”¿è²»ç”¨', 'å…¶ä»–æ”¯å‡º']
                };
